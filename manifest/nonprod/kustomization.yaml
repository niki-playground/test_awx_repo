apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- github.com/ansible/awx-operator/config/default?ref=1.3.0
- awx.yaml

images:
- name: quay.io/ansible/awx-operator
  newTag: 1.3.0

patches:
- patch: |-
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: controller-manager
      namespace: system
    spec:
      template:
        spec:
          containers:
            - name: awx-manager
              resources:
                limits:
                  cpu: 0.5
                  memory: 512Mi
              env:
                - name: ANSIBLE_DEBUG_LOGS
                  value: 'true'
  target:
    kind: Deployment
    name: controller-manager
namespace: awx-nonprod
